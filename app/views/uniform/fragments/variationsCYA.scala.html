@*
 * Copyright 2018 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@(v: sdil.models.variations.VariationData, path: List[String])(implicit m: Messages)

@if(path.contains("packSites") && v.updatedProductionSites.nonEmpty) {
<table class="check-your-answers">
    <caption class="heading-medium">@Messages("variations.cya.packsites")</caption>

    <thead>
        <tr>
            <th>
                <h2 class="heading-small">
                    @Messages("variations.cya.packsites.address")
                </h2>
            </th>
            <th>
                <h2 class="heading-small">
                    @Messages("variations.cya.postcode")
                </h2>
            </th>
            <th>
            </th>
        </tr>
    </thead>

    <tbody>
        @for(site <- v.updatedProductionSites) {
        <tr>
            <td>
                <details role="group">
                    <summary role="button" aria-controls="details-content-0" aria-expanded="false"><span class="summary">@site.address.lines.head</span></summary>
                    @for(line <- site.address.lines.tail) {
                       <div aria-hidden="true">@line</div>
                    }
                    <div class="postal-code">@site.address.postCode</div>
                </details>
            </td>
            <td>@site.address.postCode</td>
            <td class="change-answer">
                <a href="packSites">
                    @Html(Messages("variations.cya.packsites.change"))
                </a>
            </td>
        </tr>
        }
    </tbody>
</table>
}

@if(path.contains("warehouses") && v.updatedWarehouseSites.nonEmpty) {
  <table class="check-your-answers">
    <caption class="heading-medium">Warehouses</caption>

    <thead>
        <tr>
            <th>
                <h2 class="heading-small">
                    @Messages("variations.cya.warehouses")
                </h2>
            </th>
            <th>
                <h2 class="heading-small">
                    @Messages("variations.cya.postcode")
                </h2>
            </th>
            <th>
            </th>
        </tr>
    </thead>

    <tbody>
      @for(site <- v.updatedWarehouseSites) {
        <tr>
          <td>
            <details role="group">
              <summary role="button" aria-controls="details-content-0" aria-expanded="false"><span class="summary">@site.address.lines.head</span></summary>
              @for(line <- site.address.lines.tail) {
                <div aria-hidden="true">@line</div>
              }
              <div class="postal-code">@site.address.postCode</div>
            </details>
          </td>
          <td>@site.address.postCode</td>
          <td class="change-answer">
            <a href="warehouses">
              @Html(Messages("variations.cya.warehouses.change"))
            </a>
          </td>
        </tr>
        }
    </tbody>
  </table>
}

@if(path.contains("contact")) {
  <h2 class="heading-medium">
      @Messages("variations.cya.contact")
  </h2>

  <dl class="govuk-check-your-answers cya-questions-short">
    <div>
        <dt class="cya-question">
            @Messages("variations.cya.contact.fullName")
        </dt>
        <dd class="cya-answer">
            @v.updatedContactDetails.fullName
        </dd>
        <dd class="cya-change">
            <a href="contact">
                @Html(Messages("variations.cya.contact.change.fullName"))
            </a>
        </dd>
    </div>
    <div>
        <dt class="cya-question">
            @Messages("variations.cya.contact.jobTitle")
        </dt>
        <dd class="cya-answer">
            @v.updatedContactDetails.position
        </dd>
        <dd class="cya-change">
            <a href="contact">
                @Html(Messages("variations.cya.contact.change.jobTitle"))
            </a>
        </dd>
    </div>
    <div>
        <dt class="cya-question">
            @Messages("variations.cya.contact.telephone")
        </dt>
        <dd class="cya-answer">
            @v.updatedContactDetails.phoneNumber
        </dd>
        <dd class="cya-change">
            <a href="contact">
                @Html(Messages("variations.cya.contact.change.telephone"))
            </a>
        </dd>
    </div>

    <div>
        <dt class="cya-question">
            @Messages("variations.cya.contact.email")
        </dt>
        <dd class="cya-answer">
            @v.updatedContactDetails.email
        </dd>
        <dd class="cya-change">
            <a href="contact">
                @Html(Messages("variations.cya.contact.change.email"))
            </a>
        </dd>
    </div>

  </dl>
}

@if(path.contains("businessAddress")) {
<h2 class="heading-medium">
    @Messages("variations.cya.contact.address")
</h2>

<dl class="govuk-check-your-answers cya-questions-short">

    <div>
        <dt class="cya-question">
            @Messages("variations.cya.contact.address.sub")
        </dt>
        <dd class="cya-answer">
            @v.updatedBusinessAddress.nonEmptyLines.head
            @for(line <- v.updatedBusinessAddress.nonEmptyLines.tail) {
                <br />
                @line
            }
        </dd>
        <dd class="cya-change">
            <a href="businessAddress">
                @Html(Messages("variations.cya.contact.change.address"))
            </a>
        </dd>
    </div>

</dl>
}

@if(path.contains("deregDate") || path.contains("reason")) {

    <h2 class="heading-medium">
        @Messages("variations.cya.deregistration")
    </h2>

    <dl class="govuk-check-your-answers cya-questions-short">

        @v.reason.map{ reason =>
        <div>
            <dt class="cya-question">
                @Messages("variations.cya.deregistration.reason")
            </dt>
            <dd class="cya-answer">
                <p>@reason</p>
            </dd>
            <dd class="cya-change">
                <a href="reason">
                    @Html(Messages("variations.cya.deregistration.change.reason"))
                </a>
            </dd>
        </div>
        }

        @v.deregDate.map{ date =>
        <div>
            <dt class="cya-question">
                @Messages("variations.cya.deregistration.date")
            </dt>
            <dd class="cya-answer">
                <p>@date</p>
            </dd>
            <dd class="cya-change">
                <a href="deregDate">
                    @Html(Messages("variations.cya.deregistration.change.date"))
                </a>
            </dd>
        </div>
        }
    </dl>
}
